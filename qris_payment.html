<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Pembayaran QRIS</title>
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self'; 
        script-src 'self' 'unsafe-inline'; 
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
        font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
        img-src 'self' data: https://*.midtrans.com;
        connect-src 'self' http://localhost:4000;
    ">
    
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap">
    <style>
        /* CSS Khusus untuk Keyboard Virtual (Ukuran Disesuaikan) */
        #virtual-keyboard {
            display: none; /* Awalnya disembunyikan */
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 20px;
            background-color: rgba(255, 255, 255, 0.8); /* Dibuat lebih transparan */
            padding: 8px; /* Padding dikurangi */
            border-radius: 16px 16px 0 0;
            width: 100%;
            max-width: 700px; /* Lebar maksimum keyboard dikurangi */
            box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 5px; /* Margin antar baris dikurangi */
        }
        .keyboard-key {
            background-color: var(--container-bg);
            color: var(--text-secondary);
            border: none;
            border-radius: 8px;
            font-size: 1.1em;   /* Font dikecilkan */
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            width: 50px;        /* Lebar tombol dikecilkan */
            height: 50px;       /* Tinggi tombol dikecilkan */
            margin: 3px;        /* Margin antar tombol dikecilkan */
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
            transition: background-color 0.2s, transform 0.1s;
        }
        .keyboard-key:hover {
            background-color: #f1f1f1;
        }
        .keyboard-key:active {
            transform: scale(0.95);
        }
        .key-special {
            min-width: 80px;    /* Lebar tombol spesial dikecilkan */
            background-color: #d1d5db;
            font-size: 0.9em;     /* Font tombol spesial dikecilkan */
        }
    </style>
</head>
<body>
    <div class="top-logo-container">
        <img src="./assets/Logo.png" alt="Logo ShooteraSnap" />
        <span>Sudut Lagi</span>
    </div>

    <div class="main-container">
        <!-- Tampilan 1: Input Voucher -->
        <div class="content-box" id="voucherInputContainer">
            <h1 class="page-title">QRIS</h1>
            <p class="base-price">
                Harga Normal: Rp <span id="hargaNormal">35,000</span>
            </p>
            <h2 class="sub-title">Masukkan kode voucher anda:</h2>
            <input type="text" class="input-field" id="voucherCode" name="voucherCode" placeholder="Ketik kode disini">
            <p class="small-note">*Jika tidak memiliki voucher, silahkan langsung tekan bayar</p>
            <div class="button-group">
                <button class="btn-primary-custom" id="backToPaymentMethod">← Kembali</button>
                <button class="btn-primary-custom" id="payButton">Bayar</button>
            </div>
            <div id="errorMessage" class="message-box error" style="display: none;"></div>
        </div>
        
        <!-- Tampilan 2: Tampilan QR Code (Awalnya disembunyikan) -->
        <div class="content-box" id="paymentDetailsSection" style="display: none;">
             <h1 class="page-title" id="paymentMethodText">QRIS</h1>
             <div id="qrCodeContainer" style="margin-top: 15px; text-align: center;">
                 <img id="qrCodeImage" src="" alt="QR Code Pembayaran" style="max-width: 280px; border: 1px solid #ccc; padding: 5px; border-radius: 8px;"/>
             </div>
             <h2 class="sub-title" style="margin-top: 20px;">Total Rp <span id="paymentAmountText">-</span></h2>
             <div class="expiry-info">
                 batas waktu pembayaran: <strong id="expiryTimeText">-</strong>
             </div>
             <p id="paymentStatusText" class="message-box">Menunggu Pembayaran</p>
             <div class="button-group">
                  <button class="btn-primary-custom" id="backAfterQr">← Kembali</button>
             </div>
        </div>
    </div>
    
    <!-- Kontainer untuk Keyboard Virtual -->
    <div id="virtual-keyboard"></div>

    <script src="./renderer.js"></script>
</body>
</html>
